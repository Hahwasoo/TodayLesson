<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.todaylesson.Mapper.JY_SN_Approve_LessonMapper">

<select id="getSenior_no" parameterType="java.lang.String" resultType="int">

select senior_no from senior
where member_id=#{member_id}

</select>

<select id="apl_list" parameterType="int" resultType="com.todaylesson.DTO.LessonDTO">

select * from lesson
where senior_no = #{senior_no}
and lesson_result = 2

</select>


<select id="apl_detail" parameterType="int" resultType="com.todaylesson.DTO.LessonDTO">

select * from lesson
where lesson_no = #{lesson_no}

</select>

<insert id="apl_upload" parameterType="com.todaylesson.DTO.LessonDetailDTO">

<selectKey order="BEFORE" keyProperty="lessondetail_chapter" resultType="integer">

select ifnull(max(lessondetail_chapter),0) from lessondetail

</selectKey>

insert into lessondetail(lesson_no, senior_no, lessondetail_title, lessondetail_content, lessondetail_chapter, member_id)
values(#{lesson_no},#{senior_no},#{lessondetail_title},#{lessondetail_content},#{lessondetail_chapter}+ 1,#{member_id})

</insert>

<select id="apld_list" parameterType="int" resultType="com.todaylesson.DTO.LessonDetailDTO">

select * from lessondetail where lesson_no = #{lesson_no} order by lessondetail_chapter asc

</select>

<select id="apld_select" parameterType="int" resultType="com.todaylesson.DTO.LessonDetailDTO">

select * from lessondetail where lessondetail_no = #{lessondetail_no}

</select>





</mapper>



