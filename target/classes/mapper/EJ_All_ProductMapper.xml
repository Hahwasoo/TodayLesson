<?xml version="1.0" encoding="UTF-8"?>  <!-- 해당하는 xml을 mybatis와 관련된 규칙으로 한다. -->
<!DOCTYPE mapper 
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  

<mapper namespace="com.todaylesson.Mapper.EJ_US_ProductMapper">



<select id="allData" resultType="com.todaylesson.DTO.ProductDTO">
select *
from product
</select>


<!-- 게시판 insert -->
<insert id="insertBoard" parameterType="com.todaylesson.DTO.ProductDTO">
INSERT INTO product (product_name, product_cost, product_stock, product_content, product_img, product_thumb, product_category, product_sale, product_after_cost)
				VALUES (#{product_name},#{product_cost},#{product_stock},#{product_content},#{product_img},#{product_thumb}, #{product_category}, #{product_sale}, #{product_after_cost})
</insert>


<select id="selectBoard" parameterType="int" resultType="com.todaylesson.DTO.ProductDTO">
select *
from product
where product_no=#{product_no}
</select>


 <select id="selectReply" resultType="com.todaylesson.DTO.PdReviewDTO">
select *
from pdreview, orderlist
where pdreview.orderlist_no=orderlist.orderlist_no
and product_no=#{product_no}
</select> 


<insert id="registReply" parameterType="com.todaylesson.DTO.PdReviewDTO">
 <selectKey resultType="int" keyProperty="orderlist_no" order="BEFORE">
 	select orderlist_no from orderlist 
 	where product_no=#{product_no} and member_id=#{member_id}
 </selectKey>
 insert into pdreview(orderlist_no, pdreview_content,pdreview_date)
 values (#{orderlist_no},#{pdreview_content},sysdate())
</insert>

<select id="selectMember" parameterType="String" resultType="com.todaylesson.DTO.MemberDTO">
select *
from member
where member_id=#{member_id}
</select>
<!-- 게시판 insert -->
<insert id="insertOption" parameterType="com.todaylesson.DTO.PdOptionDTO">
INSERT INTO pd_option (pd_option)
				VALUES (#{product_name},#{product_cost},#{product_stock},#{product_content},#{product_img},#{product_thumb}, #{product_category}, #{product_sale}, #{product_after_cost})
</insert>
</mapper> 